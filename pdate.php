<?php  /* Pdate v1.2.9 min | https://github.com/vahid-sohrabloo/Pdate */
static $c=array('','فروردین','اردیبهشت','خرداد','تیر','مرداد','شهریور','مهر','آبان','آذر','دی','بهمن','اسفند');static $d=array('شنبه','یکشنبه','دوشنبه','سه شنبه','چهارشنبه','پنج شنبه','جمعه');static $e=array(0,31,31,31,31,31,31,30,30,30,30,30,29);function wpfa_pdate($f,$g=NULL){global $c,$d,$e;if(!$g){$g=time();}list($h,$j,$k,$l)=explode('-',date('Y-m-d-w',$g));list($m,$n,$o)=gregorian2jalali($h,$j,$k);$p=($l+1);if($p>=7){$p=0;}if($f=='\\'){$f='//';}$q=strlen($f);$r=0;$s='';while($r<$q){$t=$f{$r};if($t=='\\'){$s.=$f{++$r};$r++;continue;}switch($t){case 'd':$s.=(($o<10)?('0'.$o):$o);break;case 'D':$s.=substr($d[$p],0,2);break;case 'j':$s.=$o;break;case 'l':$s.=$d[$p];break;case 'N':$s.=$p+1;break;case 'w':$s.=$p;break;case 'z':$s.=DayOfYear($n,$o);break;case 'S':$s.='م';break;case 'W':$s.=ceil(DayOfYear($n,$o)/7);break;case 'F':$s.=$c[$n];break;case 'm':$s.=(($n<10)?('0'.$n):$n);break;case 'M':$s.=substr($c[$n],0,6);break;case 'n':$s.=$n;break;case 't':$s.=((is_Kabise($m)&&($n==12))?30:$e[$n]);break;case 'L':$s.=(int)is_Kabise($m);break;case 'Y':case 'o':$s.=$m;break;case 'y':$s.=substr($m,2);break;case 'a':case 'A':if(date('a',$g)=='am'){$s.=(($t=='a')?'ق.ظ':'قبل از ظهر');}else{$s.=(($t=='a')?'ب.ظ':'بعد از ظهر');}break;case 'B':case 'g':case 'G':case 'h':case 'H':case 's':case 'u':case 'i':case 'e':case 'I':case 'O':case 'P':case 'T':case 'Z':$s.=date($t,$g);break;case 'c':$s.=($m.'-'.$n.'-'.$o.' '.date('H:i:s P',$g));break;case 'r':$s.=(substr($d[$p],0,2).'، '.$o.' '.substr($c[$n],0,6).' '.$m.' '.date('H::i:s P',$g));break;case 'U':$s.=$g;break;default:$s.=$t;}$r++;}return $s;}function DayOfYear($n,$o){global $e;$u=0;for($r=1;$r<$n;$r++){$u+=$e[$r];}return($u+$o);}function is_Kabise($v){$w=($v%33);if(($w==1)or($w==5)or($w==9)or($w==13)or($w==17)or($w==22)or($w==26)or($w==30)){return 1;}return 0;}function div2($x,$y){return (int)($x/$y);}function gregorian2jalali($z,$aa,$bb){static $cc=array(31,28,31,30,31,30,31,31,30,31,30,31);static $dd=array(31,31,31,31,31,31,30,30,30,30,30,29);$ee=$z-1600;$ff=$aa-1;$gg=(365*$ee+div2($ee+3,4)-div2($ee+99,100)+div2($ee+399,400));for($r=0;$r<$ff;++$r){$gg+=$cc[$r];}if($ff>1&&(($ee%4==0&&$ee%100!=0)||($ee%400==0)))$gg++;$gg+=$bb-1;$hh=$gg-79;$ii=div2($hh,12053);$hh=$hh%12053;$jj=(979+33*$ii+4*div2($hh,1461));$hh%=1461;if($hh>=366){$jj+=div2($hh-1,365);$hh=($hh-1)%365;}for($r=0;($r<11&&$hh>=$dd[$r]);++$r){$hh-=$dd[$r];}return array($jj,$r+1,$hh+1);}function jalali2gregorian($kk,$ll,$mm){static $cc=array(31,28,31,30,31,30,31,31,30,31,30,31);static $dd=array(31,31,31,31,31,31,30,30,30,30,30,29);$jj=$kk-979;$nn=$ll-1;$hh=(365*$jj+div2($jj,33)*8+div2($jj%33+3,4));for($r=0;$r<$nn;++$r){$hh+=$dd[$r];}$hh+=$mm-1;$gg=$hh+79;$ee=(1600+400*div2($gg,146097));$gg=$gg%146097;$oo=1;if($gg>=36525){$gg--;$ee+=(100*div2($gg,36524));$gg=$gg%36524;if($gg>=365){$gg++;}else{$oo=0;}}$ee+=(4*div2($gg,1461));$gg%=1461;if($gg>=366){$oo=0;$gg--;$ee+=div2($gg,365);$gg=($gg%365);}for($r=0;$gg>=($cc[$r]+($r==1&&$oo));$r++){$gg-=($cc[$r]+($r==1&&$oo));}return array($ee,$r+1,$gg+1);}